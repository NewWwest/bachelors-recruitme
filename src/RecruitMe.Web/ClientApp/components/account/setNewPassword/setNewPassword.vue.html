<template>
    <div>
        <div v-if="!newPasswordSet">
            <h2>Ustaw nowe haslo</h2>
            <form @submit.prevent="handleSubmit">
                <div class="form-group">
                    <label htmlFor="newPassword">new Password</label>
                    <input type="password" v-model="newPassword" name="newPassword" class="form-control" />
                    <div v-show="submitted && !newPassword" class="invalid-feedback">newPassword is required</div>
                </div>

                <div class="form-group">
                    <label htmlFor="confirmPassword">confirmPassword</label>
                    <input type="password" v-model="confirmPassword" name="confirmPassword" class="form-control" />
                    <div v-show="submitted && newPassword != confirmPassword" class="invalid-feedback">
                        Password is doesnt match
                    </div>
                </div>

                <div class="form-group">
                    <button class="btn btn-primary" :disabled="fetching">Set new password</button>
                    <div v-show="backendError"> {{backendError}} </div>
                    <img v-show="fetching" />
                </div>
            </form>
        </div>

        <div v-if="newPasswordSet">
            Haslo pomyslnie zresetowane, mozesz się teraz zalogowac nowym haslem.
        </div>
    </div>
</template>
<script src="./setNewPassword.ts"></script>